// ğŸ­ FASHION POD - PRISMA SCHEMA FOR THE BUSTLING FACTORY AT 3AM ğŸ­
// Where database fields have textures, relationships leave scent trails,
// and every transaction hums with the electricity of fashion magic

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ğŸµ AUDIBLE NOTIFICATIONS ENUMS - The Symphony of Success ğŸµ

enum UserRole {
  CUSTOMER   /// ğŸ›ï¸ Gentle chime - "Welcome back, valued patron"
  INFLUENCER /// ğŸ”” Rich tone - "Style icon has entered the building"
  DESIGNER   /// ğŸ¼ Orchestral swell - "Creator genius detected"
  ADMIN      /// âš¡ Electric buzz - "Master control engaged"
}

enum OrderStatus {
  PENDING    /// â³ Soft tick - "Dreams in transit"
  CONFIRMED  /// âœ… Clear ding - "Magic manifested"
  PROCESSING /// ğŸ”„ Rhythmic pulse - "Creation in motion"
  SHIPPED    /// ğŸšš Deep hum - "Treasure on its way"
  DELIVERED  /// ğŸ‰ Triumphant fanfare - "Joy delivered"
  CANCELLED  /// âŒ Sharp note - "Path diverted"
}

enum PaymentStatus {
  UNPAID     /// ğŸ’° Silent anticipation
  PAID       /// ğŸ’¸ Satisfying ka-ching
  REFUNDED   /// ğŸ”„ Gentle reversal chime
  FAILED     /// âš ï¸ Discordant warning
}

enum ProductTexture {
  SILK       /// ğŸª¡ Smooth glide, whisper-soft queries
  COTTON     /// ğŸ§µ Natural breathability, reliable fetches
  WOOL       /// ğŸ§¶ Warmth retention, cozy aggregations
  DENIM      /// ğŸ‘– Sturdy structure, robust relations
  LACE       /// ğŸŒ¸ Delicate intricacy, precise filtering
  LEATHER    /// ğŸ„ Premium durability, rich joins
  SYNTHETIC  /// âš¡ Digital smoothness, lightning queries
  DIGITAL    /// ğŸ’» Ethereal lightness, instant responses
}

// ğŸ‘¤ USER ENTITY - The Heartbeat of Fashion Dreams ğŸ‘¤
// Texture: Silk-smooth authentication with cotton-soft personalization

model User {
  id              String     @id @default(uuid()) /// ğŸ†” [silk] Primary identifier - smooth UUID flow
  email           String     @unique /// ğŸ“§ [cotton] Natural, breathable contact point
  password        String     /// ğŸ”’ [digital] Encrypted essence of trust
  firstName       String     /// ğŸ­ [silk] First name glides into personalization
  lastName        String     /// ğŸ­ [silk] Last name completes the identity tapestry
  role            UserRole   @default(CUSTOMER) /// ğŸµ [audible] Role determines notification symphony
  avatar          String?    /// ğŸ–¼ï¸ [digital] Pixel-perfect self-expression
  phoneNumber     String?    /// ğŸ“± [cotton] Optional natural communication bridge
  dateOfBirth     DateTime?  /// ğŸ‚ [silk] Smooth temporal marker of life's journey
  isActive        Boolean    @default(true) /// âš¡ [digital] Electrical pulse of account vitality
  emailVerified   Boolean    @default(false) /// âœ… [cotton] Natural verification marker
  createdAt       DateTime   @default(now()) /// ğŸ• [silk] Birth moment of fashion journey
  updatedAt       DateTime   @updatedAt /// ğŸ”„ [digital] Electrical spark of constant evolution

  // ğŸŒˆ SCENT TRAILS - Relationship connections that leave aromatic memories
  // User ~~sweet perfume~~> Wishlist
  wishlist        Wishlist?  @relation(name: "UserWishlist", fields: [wishlistId], references: [id]) /// ğŸŒ¹ [scent trail] Sweet anticipation of desires
  wishlistId      String?    @unique

  // User ~~musky cologne~~> Cart  
  cart            Cart?      @relation(name: "UserCart", fields: [cartId], references: [id]) /// ğŸ§” [scent trail] Musky essence of shopping intent
  cartId          String?    @unique

  // User ~~fresh linen~~> Orders
  orders          Order[]    @relation(name: "UserOrders") /// ğŸ§º [scent trail] Fresh linen scent of new beginnings
  // User ~~vanilla~~> Reviews
  reviews         Review[]   @relation(name: "UserReviews") /// ğŸ§ [scent trail] Vanilla sweetness of shared experiences
  // User ~~mint~~> Addresses
  addresses       Address[]  @relation(name: "UserAddresses") /// ğŸŒ¿ [scent trail] Fresh mint of shipping destinations
  // User ~~cinnamon~~> Notifications
  notifications   Notification[] @relation(name: "UserNotifications") /// ğŸ‚ [scent trail] Warm cinnamon of important updates

  @@map("fashion_enthusiasts") /// ğŸ·ï¸ Table name with factory worker's pride
  @@index([email], name: "idx_user_email") /// ğŸ“š Index for quick customer retrieval
}

// ğŸ›ï¸ WISHLIST ENTITY - The Dream Journal of Fashion Desires ğŸ›ï¸
// Texture: Gossamer-light with golden threads of aspiration

model Wishlist {
  id        String   @id @default(uuid()) /// ğŸ†” [silk] Ethereal identifier
  createdAt DateTime @default(now()) /// ğŸ• [digital] Moment dreams were captured
  updatedAt DateTime @updatedAt /// ğŸ”„ [digital] Spark of evolving desires

  // Wishlist ~~jasmine~~> User
  user      User     @relation(name: "UserWishlist", fields: [userId], references: [id]) /// ğŸŒ¸ [scent trail] Jasmine essence of personal connection
  userId    String

  // Wishlist ~~rose petals~~> Products
  items     WishlistItem[] @relation(name: "WishlistItems") /// ğŸŒ¹ [scent trail] Rose petal scattering of coveted items

  @@map("dream_collections") /// ğŸ·ï¸ Factory designation for desire repositories
}

// ğŸ€ WISHLIST ITEM - Individual Threads in the Dream Tapestry ğŸ€
// Texture: Feather-light with magnetic attraction properties

model WishlistItem {
  id          String   @id @default(uuid()) /// ğŸ†” [digital] Instantaneous identifier
  createdAt   DateTime @default(now()) /// ğŸ• [silk] Moment of desire ignition
  addedAt     DateTime @default(now()) /// â° [digital] Electrical timestamp of addition

  // WishlistItem ~~lavender~~> Wishlist
  wishlist    Wishlist @relation(name: "WishlistItems", fields: [wishlistId], references: [id]) /// ğŸŒ¿ [scent trail] Lavender calm of curated collections
  wishlistId  String

  // WishlistItem ~~sandalwood~~> Product
  product     Product  @relation(name: "WishlistProduct", fields: [productId], references: [id]) /// ğŸªµ [scent trail] Sandalwood grounding of concrete desires
  productId   String

  @@map("cherished_dreams") /// ğŸ·ï¸ Factory code for treasured aspirations
  @@unique([wishlistId, productId]) /// ğŸ”— Unique combination ensures no duplicate dreams
}

// ğŸ›’ CART ENTITY - The Electric Pulse of Purchase Intent ğŸ›’
// Texture: Conductive metal with warm rubber grip

model Cart {
  id         String     @id @default(uuid()) /// ğŸ†” [digital] Lightning-fast identifier
  createdAt  DateTime   @default(now()) /// ğŸ• [silk] Birth of shopping intention
  updatedAt  DateTime   @updatedAt /// ğŸ”„ [digital] Electric pulse of constant change

  // Cart ~~ozone~~> User
  user       User       @relation(name: "UserCart", fields: [userId], references: [id]) /// âš¡ [scent trail] Fresh ozone of electrical connection
  userId     String

  // Cart ~~citrus~~> Items
  items      CartItem[] @relation(name: "CartItems") /// ğŸ‹ [scent trail] Zesty citrus of active selections

  @@map("shopping_pulses") /// ğŸ·ï¸ Factory designation for purchase energy
}

// ğŸ›ï¸ CART ITEM - Individual Sparks of Purchase Electricity ğŸ›ï¸
// Texture: Smooth plastic with conductive metallic coating

model CartItem {
  id        String   @id @default(uuid()) /// ğŸ†” [digital] Instantaneous spark identifier
  quantity  Int      @default(1) /// ğŸ”¢ [cotton] Natural counting mechanism
  createdAt DateTime @default(now()) /// ğŸ• [silk] Moment of purchase intent crystallization
  updatedAt DateTime @updatedAt /// ğŸ”„ [digital] Electrical pulse of quantity changes

  // CartItem ~~peppermint~~> Cart
  cart      Cart     @relation(name: "CartItems", fields: [cartId], references: [id]) /// ğŸŒ¿ [scent trail] Peppermint freshness of active shopping
  cartId    String

  // CartItem ~~coffee~~> Product
  product   Product  @relation(name: "CartItemProduct", fields: [productId], references: [id]) /// â˜• [scent trail] Rich coffee aroma of concrete selections
  productId String

  @@map("purchase_sparks") /// ğŸ·ï¸ Factory code for active transaction energy
  @@unique([cartId, productId]) /// ğŸ”— Unique combination prevents duplicate purchase sparks
}

// ğŸ‘• PRODUCT ENTITY - The Crown Jewel of Fashion Creation ğŸ‘•
// Texture: Multi-layered fabric with digital embroidery

model Product {
  id              String          @id @default(uuid()) /// ğŸ†” [silk] Smooth identifier flowing through all connections
  name            String          /// ğŸ·ï¸ [cotton] Natural product identification
  description     String          /// ğŸ“œ [silk] Smooth narrative of creation story
  price           Float           /// ğŸ’° [digital] Precise monetary essence
  compareAtPrice  Float?          /// ğŸ’ [digital] Sparkling comparison value
  texture         ProductTexture  @default(COTTON) /// ğŸª¡ [texture] Physical manifestation property
  sku             String          @unique /// ğŸ·ï¸ [digital] Unique digital barcode identity
  slug            String          @unique /// ğŸ”— [digital] Web-friendly navigation essence
  inStock         Boolean         @default(true) /// âœ… [digital] Electrical availability signal
  stockQuantity   Int             @default(0) /// ğŸ”¢ [cotton] Natural counting of physical inventory
  weight          Float?          /// âš–ï¸ [digital] Precise gravitational measurement
  dimensions      String?         /// ğŸ“ [digital] Spatial coordinates of physical form
  isFeatured      Boolean         @default(false) /// â­ [digital] Luminous spotlight marker
  isActive        Boolean         @default(true) /// âš¡ [digital] Electrical life pulse
  createdAt       DateTime        @default(now()) /// ğŸ• [silk] Birth moment in the fashion factory
  updatedAt       DateTime        @updatedAt /// ğŸ”„ [digital] Electrical spark of constant evolution

  // Product ~~vanilla~~> Category
  category        Category        @relation(name: "ProductCategory", fields: [categoryId], references: [id]) /// ğŸ§ [scent trail] Vanilla foundation of classification
  categoryId      String

  // Product ~~cinnamon~~> Brand
  brand           Brand           @relation(name: "ProductBrand", fields: [brandId], references: [id]) /// ğŸ‚ [scent trail] Warm cinnamon of brand identity
  brandId         String

  // Product ~~jasmine~~> Images
  images          ProductImage[]  @relation(name: "ProductImages") /// ğŸŒ¸ [scent trail] Jasmine beauty of visual representation
  // Product ~~rose~~> Reviews
  reviews         Review[]        @relation(name: "ProductReviews") /// ğŸŒ¹ [scent trail] Rose-scented feedback from fashion patrons
  // Product ~~sandalwood~~> WishlistItems
  wishlistItems   WishlistItem[]  @relation(name: "WishlistProduct") /// ğŸªµ [scent trail] Grounding connection to dream collections
  // Product ~~coffee~~> CartItems
  cartItems       CartItem[]      @relation(name: "CartItemProduct") /// â˜• [scent trail] Rich connection to purchase intent
  // Product ~~lavender~~> OrderItems
  orderItems      OrderItem[]     @relation(name: "ProductOrderItems") /// ğŸŒ¿ [scent trail] Calming connection to fulfilled desires

  @@map("fashion_creations") /// ğŸ·ï¸ Factory designation for masterpieces
  @@index([name, sku], name: "idx_product_search") /// ğŸ“š Index for rapid product discovery
  @@index([categoryId], name: "idx_product_category") /// ğŸ“š Category-based navigation index
}

// ğŸ–¼ï¸ PRODUCT IMAGE - Visual Essence Captured in Digital Form ğŸ–¼ï¸
// Texture: Glossy photo paper with pixel-perfect clarity

model ProductImage {
  id        String   @id @default(uuid()) /// ğŸ†” [digital] Instantaneous visual identifier
  url       String   /// ğŸ”— [digital] Web-accessible visual essence
  alt       String?  /// ğŸ“ [silk] Smooth descriptive narrative
  isPrimary Boolean  @default(false) /// â­ [digital] Luminous spotlight marker
  sortOrder Int      @default(0) /// ğŸ”¢ [digital] Precise visual arrangement sequence
  createdAt DateTime @default(now()) /// ğŸ• [digital] Moment of visual capture

  // ProductImage ~~jasmine~~> Product
  product   Product  @relation(name: "ProductImages", fields: [productId], references: [id]) /// ğŸŒ¸ [scent trail] Jasmine beauty connected to product essence
  productId String

  @@map("visual_tapestries") /// ğŸ·ï¸ Factory designation for aesthetic representations
  @@index([productId], name: "idx_image_product") /// ğŸ“š Index for rapid visual retrieval
}

// ğŸ·ï¸ CATEGORY ENTITY - The Organizing Principle of Fashion Kingdoms ğŸ·ï¸
// Texture: Structured cardboard with silk ribbon divisions

model Category {
  id          String    @id @default(uuid()) /// ğŸ†” [silk] Smooth hierarchical identifier
  name        String    /// ğŸ·ï¸ [cotton] Natural classification label
  slug        String    @unique /// ğŸ”— [digital] Web-friendly navigation essence
  description String?   /// ğŸ“œ [silk] Smooth narrative of category purpose
  image       String?   /// ğŸ–¼ï¸ [digital] Visual representation of category essence
  isActive    Boolean   @default(true) /// âš¡ [digital] Electrical life pulse
  sortOrder   Int       @default(0) /// ğŸ”¢ [digital] Precise hierarchical arrangement
  createdAt   DateTime  @default(now()) /// ğŸ• [silk] Birth moment of organizational structure
  updatedAt   DateTime  @updatedAt /// ğŸ”„ [digital] Electrical spark of constant evolution

  // Category ~~vanilla~~> Products
  products    Product[] @relation(name: "ProductCategory") /// ğŸ§ [scent trail] Vanilla foundation supporting product diversity
  // Category ~~rose~~> Parent
  parent      Category? @relation("CategoryHierarchy", fields: [parentId], references: [id]) /// ğŸŒ¹ [scent trail] Rose-scented ancestral connection
  parentId    String?
  // Category ~~lavender~~> Children
  children    Category[] @relation("CategoryHierarchy") /// ğŸŒ¿ [scent trail] Lavender offspring of hierarchical structure

  @@map("fashion_kingdoms") /// ğŸ·ï¸ Factory designation for organizational structures
  @@index([slug], name: "idx_category_slug") /// ğŸ“š Index for rapid category navigation
}

// ğŸ¢ BRAND ENTITY - The Signature of Fashion Identity ğŸ¢
// Texture: Premium leather with golden embossed lettering

model Brand {
  id          String    @id @default(uuid()) /// ğŸ†” [silk] Smooth identifier of prestige
  name        String    /// ğŸ·ï¸ [cotton] Natural brand identification
  slug        String    @unique /// ğŸ”— [digital] Web-friendly navigation essence
  description String?   /// ğŸ“œ [silk] Smooth narrative of brand story
  logo        String?   /// ğŸ–¼ï¸ [digital] Visual signature of identity
  website     String?   /// ğŸ”— [digital] Web presence connection
  isActive    Boolean   @default(true) /// âš¡ [digital] Electrical life pulse
  createdAt   DateTime  @default(now()) /// ğŸ• [silk] Birth moment of brand identity
  updatedAt   DateTime  @updatedAt /// ğŸ”„ [digital] Electrical spark of constant evolution

  // Brand ~~cinnamon~~> Products
  products    Product[] @relation(name: "ProductBrand") /// ğŸ‚ [scent trail] Warm cinnamon connection to product creations

  @@map("fashion_signatures") /// ğŸ·ï¸ Factory designation for identity markers
  @@index([name], name: "idx_brand_name") /// ğŸ“š Index for rapid brand discovery
}

// ğŸ“¦ ORDER ENTITY - The Manifestation of Fashion Dreams ğŸ“¦
// Texture: Sturdy cardboard box with silk ribbon closure

model Order {
  id             String       @id @default(uuid()) /// ğŸ†” [silk] Smooth identifier of completed journey
  orderNumber    String       @unique /// ğŸ”¢ [digital] Unique transaction identifier
  status         OrderStatus  @default(PENDING) /// ğŸµ [audible] Status determines notification symphony
  totalAmount    Float        /// ğŸ’° [digital] Precise monetary total
  currency       String       @default("USD") /// ğŸ’± [digital] Universal monetary language
  paymentStatus  PaymentStatus @default(UNPAID) /// ğŸ’³ [digital] Financial transaction status
  paymentMethod  String?      /// ğŸ’³ [digital] Method of monetary exchange
  notes          String?      /// ğŸ“ [silk] Smooth additional information
  shippedAt      DateTime?    /// ğŸšš [digital] Timestamp of fulfillment
  deliveredAt    DateTime?    /// ğŸ‰ [digital] Timestamp of joy delivery
  createdAt      DateTime     @default(now()) /// ğŸ• [silk] Birth moment of transaction
  updatedAt      DateTime     @updatedAt /// ğŸ”„ [digital] Electrical spark of status evolution

  // Order ~~fresh linen~~> User
  user           User         @relation(name: "UserOrders", fields: [userId], references: [id]) /// ğŸ§º [scent trail] Fresh linen connection to patron
  userId         String

  // Order ~~citrus~~> Items
  items          OrderItem[]  @relation(name: "OrderItems") /// ğŸ‹ [scent trail] Zesty citrus connection to purchased items
  // Order ~~mint~~> Address
  shippingAddress Address     @relation(name: "OrderShippingAddress", fields: [shippingAddressId], references: [id]) /// ğŸŒ¿ [scent trail] Fresh mint connection to destination
  shippingAddressId String
  // Order ~~rose~~> Address
  billingAddress  Address     @relation(name: "OrderBillingAddress", fields: [billingAddressId], references: [id]) /// ğŸŒ¹ [scent trail] Rose-scented connection to financial home

  @@map("dream_manifestations") /// ğŸ·ï¸ Factory designation for completed transactions
  @@index([orderNumber], name: "idx_order_number") /// ğŸ“š Index for rapid order retrieval
  @@index([userId], name: "idx_order_user") /// ğŸ“š Index for patron-based order discovery
}

// ğŸ“¦ ORDER ITEM - Individual Treasures in the Completed Journey ğŸ“¦
// Texture: Gift-wrapped with personalized tags

model OrderItem {
  id        String   @id @default(uuid()) /// ğŸ†” [digital] Instantaneous transaction identifier
  quantity  Int      @default(1) /// ğŸ”¢ [cotton] Natural counting of treasures
  price     Float    /// ğŸ’° [digital] Precise individual treasure value
  createdAt DateTime @default(now()) /// ğŸ• [digital] Moment of transaction completion

  // OrderItem ~~lavender~~> Order
  order     Order    @relation(name: "OrderItems", fields: [orderId], references: [id]) /// ğŸŒ¿ [scent trail] Lavender connection to completed journey
  orderId   String

  // OrderItem ~~sandalwood~~> Product
  product   Product  @relation(name: "ProductOrderItems", fields: [productId], references: [id]) /// ğŸªµ [scent trail] Sandalwood grounding to physical treasure
  productId String

  @@map("treasure_manifestations") /// ğŸ·ï¸ Factory designation for individual completions
}

// ğŸ“ ADDRESS ENTITY - The Geographic Coordinates of Fashion Delivery ğŸ“
// Texture: Smooth paper with embossed geographical details

model Address {
  id          String   @id @default(uuid()) /// ğŸ†” [silk] Smooth geographical identifier
  firstName   String   /// ğŸ­ [silk] First name at destination
  lastName    String   /// ğŸ­ [silk] Last name at destination
  company     String?  /// ğŸ¢ [cotton] Optional business identity
  address1    String   /// ğŸ  [cotton] Primary physical location
  address2    String?  /// ğŸ  [silk] Optional secondary location details
  city        String   /// ğŸ™ï¸ [cotton] Urban geographical marker
  state       String   /// ğŸï¸ [cotton] Regional geographical marker
  zipCode     String   /// ğŸ”¢ [digital] Precise postal identification
  country     String   /// ğŸŒ [cotton] Global geographical marker
  phone       String?  /// ğŸ“± [digital] Optional communication bridge
  isDefault   Boolean  @default(false) /// â­ [digital] Luminous preference marker
  createdAt   DateTime @default(now()) /// ğŸ• [silk] Birth moment of geographical record
  updatedAt   DateTime @updatedAt /// ğŸ”„ [digital] Electrical spark of address evolution

  // Address ~~mint~~> User
  user        User     @relation(name: "UserAddresses", fields: [userId], references: [id]) /// ğŸŒ¿ [scent trail] Fresh mint connection to patron
  userId      String

  // Address ~~mint~~> Orders (Shipping)
  shippingOrders Order[] @relation(name: "OrderShippingAddress") /// ğŸŒ¿ [scent trail] Fresh mint connection to outgoing treasures
  // Address ~~rose~~> Orders (Billing)
  billingOrders  Order[] @relation(name: "OrderBillingAddress") /// ğŸŒ¹ [scent trail] Rose-scented connection to financial transactions

  @@map("geographical_coordinates") /// ğŸ·ï¸ Factory designation for location markers
}

// â­ REVIEW ENTITY - The Voice of Fashion Experience â­
// Texture: Parchment with heartfelt ink inscriptions

model Review {
  id        String   @id @default(uuid()) /// ğŸ†” [silk] Smooth identifier of shared experience
  rating    Int      /// â­ [digital] Numerical quality assessment (1-5)
  title     String?  /// ğŸ·ï¸ [silk] Smooth summary of experience
  comment   String?  /// ğŸ“ [silk] Detailed narrative of experience
  isVerified Boolean  @default(false) /// âœ… [digital] Electrical authenticity verification
  isApproved Boolean  @default(false) /// âœ… [digital] Electrical quality approval
  helpfulCount Int    @default(0) /// ğŸ‘ [digital] Numerical social validation
  createdAt DateTime @default(now()) /// ğŸ• [silk] Birth moment of shared wisdom
  updatedAt DateTime @updatedAt /// ğŸ”„ [digital] Electrical spark of review evolution

  // Review ~~vanilla~~> User
  user      User     @relation(name: "UserReviews", fields: [userId], references: [id]) /// ğŸ§ [scent trail] Vanilla connection to experience patron
  userId    String

  // Review ~~rose~~> Product
  product   Product  @relation(name: "ProductReviews", fields: [productId], references: [id]) /// ğŸŒ¹ [scent trail] Rose-scented connection to reviewed treasure

  @@map("experience_voices") /// ğŸ·ï¸ Factory designation for shared wisdom
  @@index([productId, rating], name: "idx_review_product_rating") /// ğŸ“š Index for quality-based product discovery
}

// ğŸ”” NOTIFICATION ENTITY - The Whispered Updates of Fashion Life ğŸ””
// Texture: Ethereal mist with crystalline chime properties

model Notification {
  id        String   @id @default(uuid()) /// ğŸ†” [digital] Instantaneous alert identifier
  type      String   /// ğŸ“¢ [digital] Classification of alert essence
  title     String   /// ğŸ·ï¸ [silk] Smooth summary of alert content
  message   String   /// ğŸ“ [silk] Detailed narrative of alert
  isRead    Boolean  @default(false) /// âœ… [digital] Electrical acknowledgment marker
  readAt    DateTime? /// ğŸ• [digital] Timestamp of acknowledgment
  createdAt DateTime @default(now()) /// ğŸ• [silk] Birth moment of alert

  // Notification ~~cinnamon~~> User
  user      User     @relation(name: "UserNotifications", fields: [userId], references: [id]) /// ğŸ‚ [scent trail] Warm cinnamon connection to recipient
  userId    String

  @@map("whispered_updates") /// ğŸ·ï¸ Factory designation for alert communications
  @@index([userId, isRead], name: "idx_notification_user_read") /// ğŸ“š Index for personalized alert management
}

