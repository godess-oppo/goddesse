// ğŸ§  EVOLVING PRISMA SCHEMA - Learns from Query Patterns
generator client {
  provider = 
// ğŸ§  EVOLVING PRISMA SCHEMA - Learns from Query Patterns
generator client {
 

// ğŸ§  EVOLVING PRISMA SCHEMA - Lear
"prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Intelligent Models with Adaptive Fields
model User {
  id                   String    @id @default(uuid())
  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query performance data
  
  // ğŸŒ± Self-Organizing Relationships
  sessions             Session[]
  activities           UserActivity[]
  aiInteractions       AIInteraction[]
  
  // ğŸ“ˆ Intelligence Metrics
  createdAt            DateTime  @default(now())
  lastActive           DateTime  @updatedAt
  intelligenceScore    Float     @default(0.1) // ğŸ§  Confidence 
  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query performance data
  
  // ğŸŒ± Self-Organizing Relationships
  sessions             Session[]
  activities           UserActivity[]
  aiInteractions       AIInteraction[]
  
  // ğŸ“ˆ Intelligence Metrics
  createdAt            DateTime  @default(now())
  lastActive           DateTime  @updatedAt
  intelligenceScore    Float     @default(0.1

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query performance data
  
  // ğŸŒ± Self-Organizing Relationships
  sessions             Session[]
  activities           UserActivity[]
  aiInteractions       AIInteraction[]
  
  // ğŸ“ˆ Intelligence Metrics
  createdAt            DateTime  @default(now())
  lastActive           DateTime  @updatedAt
  intelligenceScore   

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query performance data
  
  // ğŸŒ± Self-Organizing Relationships
  sessions             Session[]
  activities           UserActivity[]
  aiInteractions       AIInteraction[]
  
  // ğŸ“ˆ Intelligence Metrics
  createdAt

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query performance data
  
  // ğŸŒ± Self-Organizing Relationships
  sessions             Session[]
  activities           UserActivity[]
  ai

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query performance data
  
  // ğŸŒ± Self-Organizing Relationships
  sessions             Session[]
 

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query performance data
  
  // ğŸŒ± Self

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query performance data
  
  //

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time
  queryOptimization    Json?     // âš¡ Learned query

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution  Json?     // ğŸ”„ Tracks preference drift over time

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?     // ğŸ“Š Stores user interaction patterns
  preferenceEvolution 

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based on usage patterns
  behavioralSignature  Json?    

  email                String    @unique
  name                 String?
  // ğŸ§¬ Adaptive Fields - Evolve based
in learned patterns
}

model Session {
  id            String   @id @default(uuid())
  userId        String
  user          User     @relation(fields: [userId], references: [
 
id])
  // ğŸ§  Adaptive Session Intelligence
  interactionMap    Json?    // ğŸ—ºï¸ Maps user behavior during session
  optimizationCache Json?    // âš¡ Caches learned performance patterns
  createdAt     DateTime @default(now())
  expiresAt     DateTime
}

model UserActivity {
  
  // ğŸ§  Adaptive Session Intelligence
  interactionMap    Json?    // ğŸ—ºï¸ Maps user behavior during session
  optimizationCache Json?    // âš¡ Caches learned performance patterns
  createdAt     DateTime @default(now())
  expiresAt     DateTime
}

model User

  // ğŸ§  Adaptive Session Intelligence
  interactionMap    Json?    // ğŸ—ºï¸ Maps user behavior during session
  optimizationCache Json?    // âš¡ Caches learned performance patterns
  createdAt     DateTime @default(now())
  expiresAt     DateTime

  // ğŸ§  Adaptive Session Intelligence
  interactionMap    Json?    // ğŸ—ºï¸ Maps user behavior during session
  optimizationCache Json?    // âš¡

  // ğŸ§  Adaptive Session Intelligence
  interaction
id          String   @id @default(uuid())
  userId      String
  user        User     @relation(fields: [userId], references: [
  userId      String
  user        User     @relation(fields: [userId], references:

 
id])
  action      String   // ğŸ¯ What the user did
  context     Json     // ğŸŒ Environmental factors
  performance Json?    // âš¡ System response metrics
  timestamp   DateTime @default(now())
  
  @@index([userId, timestamp]) // ğŸ“Š Auto-optimized 
  action      String   // ğŸ¯ What the user did
  context     Json     // ğŸŒ Environmental factors
  performance Json?    // âš¡ System response metrics
  timestamp   DateTime @default(now())
  
  @@

  action      String   // ğŸ¯ What the user did
  context     Json     // ğŸŒ Environmental factors
  performance Json?

  action      String   // ğŸ¯ What the user did
  context    

  action      String  
for temporal analysis
}

model AIInteraction {
  
}

model
id          String   @id @default(uuid())
  userId      String
  user        User     @relation(fields: [userId], references: [
  userId      String
  user        User     @relation(fields: [userId], references

  userId
id])
  // ğŸ¤– AI-Agent Communication Intelligence
  agentType   String   // ğŸ•¹ï¸ Which AI agent was involved
  input       Json     // ğŸ“¥ What was sent to the agent
  output      Json     // ğŸ“¤ What the agent responded with
  feedback    Json?    // ğŸ‘ User response to AI output
  confidence  Float    // ğŸ§  Agent
  // ğŸ¤– AI-Agent Communication Intelligence
  agentType   String   // ğŸ•¹ï¸ Which AI agent was involved
  input       Json     // ğŸ“¥ What was sent to the agent
  output      Json     // ğŸ“¤ What the agent responded with
  feedback    Json?    // ğŸ‘ User response to AI output
  confidence  Float

  // ğŸ¤– AI-Agent Communication Intelligence
  agentType   String   // ğŸ•¹ï¸ Which AI agent was involved
  input       Json     // ğŸ“¥ What was sent to the agent
  output      Json     // ğŸ“¤ What the agent responded with
  feedback   

  // ğŸ¤– AI-Agent Communication Intelligence
  agentType   String   // ğŸ•¹ï¸ Which AI agent was involved
  input       Json     // ğŸ“¥ What was sent to the agent
  output

  // ğŸ¤– AI-Agent Communication Intelligence
  agentType   String   // ğŸ•¹ï¸ Which AI agent

  // ğŸ¤– AI-Agent Communication Intelligence
's confidence in response
  processingTime Int   // â±ï¸ How long the interaction took
  timestamp   DateTime @default(now())
  
  @@index([userId, agentType, timestamp])
}

model SchemaEvolution {
  id              String   @id @default(uuid())
  modelName       String   // ğŸ·ï¸ Which model is evolving
  fieldChanges    Json     // ğŸ§¬ Record of field modifications
  relationshipOptimizations Json // ğŸ”— Learned relationship improvements
  performanceMetrics Json   // âš¡ Query performance improvements
  evolutionScore  Float    // ğŸ“ˆ Confidence in this evolution
  appliedAt       DateTime @default(now())
  
  @@index([modelName, appliedAt])
}

// ğŸŒŸ AUTO-GENERATED INDEXES FROM TRAFFIC ANALYSIS
// These indexes evolve based on production query patterns
// Index evolution is handled by the intelligence layer

model QueryPattern {
  id            String   @id @default(uuid())
  patternHash   String   @unique // ğŸ”¢ Unique identifier for query pattern
  frequency     Int      // ğŸ“Š How often this pattern occurs
  averageLatency Float   // â±ï¸ Typical response time
  optimization  Json?    // âš¡ Applied optimizations
  lastSeen      DateTime @default(now())
  
  @@index([frequency, averageLatency]) // ğŸ“Š Optimized for performance analysis
}
